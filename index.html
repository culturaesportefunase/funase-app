<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Atividades Cultura, Lazer e Esportes - FUNASE</title>

  <!-- sÃ³ o seu CSS -->
  <link rel="stylesheet" href="/style.css" />

  <style>
    .card{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:16px;margin:12px 0}
    .menu .menu-button{margin:4px 6px}
    .muted{color:#6b7280}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .btn{border:none;border-radius:8px;padding:10px 14px;cursor:pointer}
    .btn-primary{background:#2563eb;color:#fff}
    .logout-btn{background:#ef4444;color:#fff;border:none;border-radius:8px;padding:8px 12px;cursor:pointer}
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="logo-section">
          <div class="logo">ğŸ­</div>
          <div class="title-section">
            <h1>Atividades Cultura, Lazer e Esportes - FUNASE</h1>
            <p>Sistema Seguro de Registro de Atividades</p>
          </div>
        </div>
        <div class="user-section" id="userSection" style="display:none;">
          <span id="userEmail"></span>
          <button class="logout-btn" onclick="logout()">ğŸšª Sair</button>
        </div>
      </div>
    </header>

    <!-- Login -->
    <div id="loginSection" class="login-section">
      <div class="login-container">
        <div class="login-header">
          <h2>ğŸ” Acesso ao Sistema</h2>
          <p>Entre com suas credenciais da FUNASE</p>
        </div>

        <form id="loginForm" autocomplete="on">
          <div class="form-group">
            <label for="email">ğŸ“§ E-mail:</label>
            <input type="email" id="email" placeholder="seu.email@funase.pe.gov.br" required autocomplete="username" />
          </div>
          <div class="form-group">
            <label for="password">ğŸ”‘ Senha:</label>
            <input type="password" id="password" placeholder="Digite sua senha" required autocomplete="current-password" />
          </div>
          <div class="form-group">
            <label><input type="checkbox" id="rememberMe" /> Lembrar-me</label>
          </div>
          <button type="submit" class="login-btn">ğŸš€ Entrar</button>
          <div id="loginMsg" class="muted" style="margin-top:8px;"></div>
        </form>
      </div>
    </div>

    <!-- Menu -->
    <nav class="menu" id="menu" style="display:none;">
      <div class="menu-container">
        <button class="menu-button" onclick="showSection('formSection')">ğŸ“ Registrar Atividade</button>
        <button class="menu-button" onclick="showSection('convitesDisponiveisSection')">ğŸ“¨ Convites DisponÃ­veis</button>
        <button class="menu-button" onclick="showSection('minhasInscricoesSection')">âœ… Minhas InscriÃ§Ãµes</button>
        <button class="menu-button" onclick="showSection('savedFormsSection')">ğŸ“‹ FormulÃ¡rios Salvos</button>
        <button class="menu-button" onclick="showSection('dashboardSection')">ğŸ“Š Dashboard</button>
      </div>
    </nav>

    <!-- Main -->
    <main class="main-content" id="mainContent" style="display:none;">

      <div id="dashboardSection" class="content-section" style="display:block;">
        <div class="card">
          <h3>ğŸ“Š Dashboard</h3>
          <p class="muted">Bem-vindo! Use o menu acima para navegar.</p>
        </div>
      </div>

      <div id="formSection" class="content-section" style="display:none;">
        <div class="card">
          <h3>ğŸ“ Registrar Atividade</h3>
          <div class="row">
            <div><label>Data</label><input type="date" id="atv-data"></div>
            <div>
              <label>PerÃ­odo</label>
              <select id="atv-periodo">
                <option value="">Selecioneâ€¦</option>
                <option>ManhÃ£</option><option>Tarde</option><option>Noite</option><option>Integral</option>
              </select>
            </div>
            <div>
              <label>Tipo</label>
              <select id="atv-tipo">
                <option value="">Selecioneâ€¦</option>
                <option>Interna</option><option>Externa</option>
              </select>
            </div>
          </div>
          <div class="row"><div style="flex:1"><label>Atividade</label><input id="atv-nome" placeholder="Ex.: Teatro"></div></div>
          <div class="row"><div style="flex:1"><label>DescriÃ§Ã£o</label><textarea id="atv-desc" rows="4"></textarea></div></div>
          <button class="btn btn-primary" onclick="salvarAtividade()">ğŸ’¾ Salvar</button>
          <div id="atv-msg" class="muted" style="margin-top:8px;"></div>
        </div>
      </div>

      <div id="convitesDisponiveisSection" class="content-section" style="display:none;">
        <div class="card">
          <h3>ğŸ“¨ Convites DisponÃ­veis</h3>
          <p class="muted">Exemplo simples (lista estÃ¡tica). VocÃª pode expandir depois.</p>
          <ul>
            <li>Oficina de MÃºsica â€” 20/09</li>
            <li>Jogo de VÃ´lei â€” 25/09</li>
          </ul>
        </div>
      </div>

      <div id="minhasInscricoesSection" class="content-section" style="display:none;">
        <div class="card">
          <h3>âœ… Minhas InscriÃ§Ãµes</h3>
          <p class="muted">Nenhuma no momento.</p>
        </div>
      </div>

      <div id="savedFormsSection" class="content-section" style="display:none;">
        <div class="card">
          <h3>ğŸ“‹ FormulÃ¡rios Salvos</h3>
          <div id="lista-salvos"></div>
        </div>
      </div>

    </main>
  </div>

  <script>
    // ======= estado =======
    let currentUser = null;

    // ======= helpers =======
    function setLoginMsg(txt, ok=false){
      const el = document.getElementById('loginMsg');
      el.textContent = txt || '';
      el.style.color = ok ? '#16a34a' : '#ef4444';
    }

    function showSection(id){
      document.querySelectorAll('.content-section').forEach(s => s.style.display='none');
      const tgt = document.getElementById(id);
      if (tgt) tgt.style.display = 'block';
      if (id === 'savedFormsSection') renderSalvos();
    }

    function logout(){
      currentUser = null;
      localStorage.removeItem('rememberedUser');
      document.getElementById('loginSection').style.display = 'block';
      document.getElementById('menu').style.display = 'none';
      document.getElementById('mainContent').style.display = 'none';
      document.getElementById('userSection').style.display = 'none';
      setLoginMsg('');
    }

    // ======= login =======
    window.addEventListener('DOMContentLoaded', () => {
      const remembered = localStorage.getItem('rememberedUser');
      if (remembered) {
        document.getElementById('email').value = remembered;
        document.getElementById('rememberMe').checked = true;
      }

      document.getElementById('loginForm').addEventListener('submit', (e) => {
        e.preventDefault();
        const email = (document.getElementById('email').value || '').trim().toLowerCase();
        const senha = (document.getElementById('password').value || '').trim();
        const lembrar = document.getElementById('rememberMe').checked;

        if (!email.endsWith('@funase.pe.gov.br')) return setLoginMsg('Use apenas e-mails @funase.pe.gov.br');
        if (senha !== 'funase2024') return setLoginMsg('Senha incorreta');

        if (lembrar) localStorage.setItem('rememberedUser', email);
        currentUser = email;

        document.getElementById('loginSection').style.display = 'none';
        document.getElementById('menu').style.display = 'block';
        document.getElementById('mainContent').style.display = 'block';
        document.getElementById('userSection').style.display = 'block';
        document.getElementById('userEmail').textContent = email;

        showSection('dashboardSection');
      });
    });

    // ======= salvar atividade (localStorage) =======
    function salvarAtividade(){
      const a = {
        id: Date.now(),
        data: document.getElementById('atv-data').value,
        periodo: document.getElementById('atv-periodo').value,
        tipo: document.getElementById('atv-tipo').value,
        nome: document.getElementById('atv-nome').value,
        desc: document.getElementById('atv-desc').value
      };
      const lista = JSON.parse(localStorage.getItem('atividades') || '[]');
      lista.push(a);
      localStorage.setItem('atividades', JSON.stringify(lista));
      document.getElementById('atv-msg').textContent = 'Salvo!';
    }

    function renderSalvos(){
      const box = document.getElementById('lista-salvos');
      const lista = JSON.parse(localStorage.getItem('atividades') || '[]');
      if (lista.length === 0){ box.innerHTML = '<p class="muted">Nenhum formulÃ¡rio salvo.</p>'; return; }
      box.innerHTML = '<ul>' + lista.map(a => `<li>${a.nome || '(sem nome)'} â€” ${a.data || '-'}</li>`).join('') + '</ul>';
    }
  </script>
</body>
</html>
